{{!< default}}

{{! The comment above "< default" means - insert everything in this file into
    the {body} of the default.hbs template, which contains our header/footer. }}

{{! The main content area on the homepage }}
<div class="home-carousel">
    {{#foreach posts limit="1"}}
        <a class="carousel-overlay" href="{{url}}"></a>
        <div class="home-carousel-image">
            <img src="{{image}}">
        </div>
        <a class="carousel-info flex-vertical" href="{{url}}">
            <div class="carousel-date">{{date}}</div>
            <div class="carousel-title">{{title}}</div>
        </a>   
    {{/foreach}}
</div>
<main class="content" role="main">
<div class="wrapper flex-wrapper">
    <div id="content" class="flex-content flex home-content">
        <div class="home-section-container flex-vertical">
            <div class="home-section flex-vertical flex-center">
                {{#foreach posts}}
                <article class="{{post_class}} home-post">
                    <section class="post-excerpt">
                        <header class="home-post-header">
                            <h2 class="home-post-title"><a href="{{url}}">{{title}}</a></h2>
                            <time class="home-post-date" datetime="{{date format="YYYY-MM-DD"}}">{{date format="DD MMMM, YYYY"}}</time>
                        </header>
                        {{!-- <img src="{{image}}"> --}}
                        <p>{{content}}</p>
                    </section>
                    <footer class="home-post-meta">
                        {{#if author.image}}<img class="author-thumb" src="{{author.image}}?w=50" alt="{{author.name}}" nopin="nopin" />{{/if}}
                        {{author}}
                        {{tags prefix=" on "}}
                        <time class="post-date" datetime="{{date format="YYYY-MM-DD"}}">{{date format="DD MMMM YYYY"}}</time>
                    </footer>
                </article>
                {{/foreach}}
            </div>
            {{pagination}}
        </div>
        {{> "sidebar"}}
    </div>
</div>
<script src="/assets/bower_components/moment/min/moment.min.js"></script>
<script>
    var coverImg = $(".home-carousel-image img");
    var landscape = false;

    if (coverImg.width() > coverImg.height()) {
        coverImg.addClass('landscape-header-image');
        var landscape = true;
    }

    $(window).load(setCoverImage(coverImg, landscape));

    $(window).resize(function() {
        setCoverImage(coverImg, landscape)
    });
</script>
</main>